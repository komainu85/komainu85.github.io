<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=60f20c4f2d7d10a91e2a7d86006d2c546a8fcb2c" media="screen" type="text/css">
    <link rel="stylesheet" href="/assets/css/print.css" media="print" type="text/css">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.2.3 -->
<title>Text Based Content Search Based On Tagging | Mike Robbins</title>
<meta property="og:title" content="Text Based Content Search Based On Tagging" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Out of the box Sitecore offers Content Editors the power to create tags, and assign them to content items using the Tagging field in standard values. [caption id=&quot;attachment_203&quot; align=&quot;aligncenter&quot; width=&quot;300&quot;] Tagging Standard Value When analysing the indexes using LUKE, you can see that Sitecore indexes the ID&#39;s of each tag. This makes it difficult to perform a text based content search that also matches on tags. [caption id=&quot;attachment_201&quot; align=&quot;aligncenter&quot; width=&quot;300&quot;] Luke Index View However Sitecore gives us the power to create computed fields in search indexes. This means we can create new fields within the index and programmatically create text into the index. This example below uses a computed field that instead of indexing the ID of the tag, instead adds the item name of each tag seperated by a space. This then allows you to perform a text based search against the tag. (Sitecore by default indexes the __Semantics field, so here i&#39;m creating a new field in the index called &quot;tags&quot; not to override any standard Sitecore functionality) &nbsp; Computed Field Class &lt;br /&gt; namespace MikeRobbins.CMS.ComputedFields&lt;br /&gt; {&lt;br /&gt; public class Tags : IComputedIndexField&lt;br /&gt; {&lt;br /&gt; public object ComputeFieldValue(Sitecore.ContentSearch.IIndexable indexable)&lt;br /&gt; {&lt;br /&gt; var tags = new StringBuilder();&lt;/p&gt; &lt;p&gt;Item obj = (Item)(indexable as SitecoreIndexableItem);&lt;/p&gt; &lt;p&gt;if (obj != null)&lt;br /&gt; {&lt;br /&gt; var tagField = (Sitecore.Data.Fields.MultilistField)obj.Fields[&amp;quot;__Semantics&amp;quot;];&lt;/p&gt; &lt;p&gt;if (tagField != null)&lt;br /&gt; {&lt;br /&gt; var items = tagField.GetItems();&lt;/p&gt; &lt;p&gt;foreach (var item in items)&lt;br /&gt; {&lt;br /&gt; tags.Append(item.Name + &amp;quot; &amp;quot;);&lt;br /&gt; }&lt;br /&gt; }&lt;br /&gt; }&lt;/p&gt; &lt;p&gt;return tags.Length != 0? tags.ToString():null;&lt;br /&gt; }&lt;/p&gt; &lt;p&gt;public string FieldName { get; set; }&lt;br /&gt; public string ReturnType { get; set; }&lt;br /&gt; }&lt;br /&gt; }&lt;br /&gt; XML Config Add this XML to the &quot;AddComputedIndexField&quot; section of your search index config. &lt;br /&gt; &lt;field fieldName=&amp;quot;tags&amp;quot;                           &gt;MikeRobbins.CMS.ComputedFields.Tags,MikeRobbins.CMS&lt;/field&gt;&lt;br /&gt;" />
<meta property="og:description" content="Out of the box Sitecore offers Content Editors the power to create tags, and assign them to content items using the Tagging field in standard values. [caption id=&quot;attachment_203&quot; align=&quot;aligncenter&quot; width=&quot;300&quot;] Tagging Standard Value When analysing the indexes using LUKE, you can see that Sitecore indexes the ID&#39;s of each tag. This makes it difficult to perform a text based content search that also matches on tags. [caption id=&quot;attachment_201&quot; align=&quot;aligncenter&quot; width=&quot;300&quot;] Luke Index View However Sitecore gives us the power to create computed fields in search indexes. This means we can create new fields within the index and programmatically create text into the index. This example below uses a computed field that instead of indexing the ID of the tag, instead adds the item name of each tag seperated by a space. This then allows you to perform a text based search against the tag. (Sitecore by default indexes the __Semantics field, so here i&#39;m creating a new field in the index called &quot;tags&quot; not to override any standard Sitecore functionality) &nbsp; Computed Field Class &lt;br /&gt; namespace MikeRobbins.CMS.ComputedFields&lt;br /&gt; {&lt;br /&gt; public class Tags : IComputedIndexField&lt;br /&gt; {&lt;br /&gt; public object ComputeFieldValue(Sitecore.ContentSearch.IIndexable indexable)&lt;br /&gt; {&lt;br /&gt; var tags = new StringBuilder();&lt;/p&gt; &lt;p&gt;Item obj = (Item)(indexable as SitecoreIndexableItem);&lt;/p&gt; &lt;p&gt;if (obj != null)&lt;br /&gt; {&lt;br /&gt; var tagField = (Sitecore.Data.Fields.MultilistField)obj.Fields[&amp;quot;__Semantics&amp;quot;];&lt;/p&gt; &lt;p&gt;if (tagField != null)&lt;br /&gt; {&lt;br /&gt; var items = tagField.GetItems();&lt;/p&gt; &lt;p&gt;foreach (var item in items)&lt;br /&gt; {&lt;br /&gt; tags.Append(item.Name + &amp;quot; &amp;quot;);&lt;br /&gt; }&lt;br /&gt; }&lt;br /&gt; }&lt;/p&gt; &lt;p&gt;return tags.Length != 0? tags.ToString():null;&lt;br /&gt; }&lt;/p&gt; &lt;p&gt;public string FieldName { get; set; }&lt;br /&gt; public string ReturnType { get; set; }&lt;br /&gt; }&lt;br /&gt; }&lt;br /&gt; XML Config Add this XML to the &quot;AddComputedIndexField&quot; section of your search index config. &lt;br /&gt; &lt;field fieldName=&amp;quot;tags&amp;quot;                           &gt;MikeRobbins.CMS.ComputedFields.Tags,MikeRobbins.CMS&lt;/field&gt;&lt;br /&gt;" />
<link rel="canonical" href="http://localhost:4000/content%20search/sitecore/2014/07/16/text-based-content-search-based-on-tagging.html" />
<meta property="og:url" content="http://localhost:4000/content%20search/sitecore/2014/07/16/text-based-content-search-based-on-tagging.html" />
<meta property="og:site_name" content="Mike Robbins" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-07-16T13:40:05+01:00" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"BlogPosting","headline":"Text Based Content Search Based On Tagging","author":{"@type":"Person","name":null},"datePublished":"2014-07-16T13:40:05+01:00","dateModified":"2014-07-16T13:40:05+01:00","description":"Out of the box Sitecore offers Content Editors the power to create tags, and assign them to content items using the Tagging field in standard values. [caption id=&quot;attachment_203&quot; align=&quot;aligncenter&quot; width=&quot;300&quot;] Tagging Standard Value When analysing the indexes using LUKE, you can see that Sitecore indexes the ID&#39;s of each tag. This makes it difficult to perform a text based content search that also matches on tags. [caption id=&quot;attachment_201&quot; align=&quot;aligncenter&quot; width=&quot;300&quot;] Luke Index View However Sitecore gives us the power to create computed fields in search indexes. This means we can create new fields within the index and programmatically create text into the index. This example below uses a computed field that instead of indexing the ID of the tag, instead adds the item name of each tag seperated by a space. This then allows you to perform a text based search against the tag. (Sitecore by default indexes the __Semantics field, so here i&#39;m creating a new field in the index called &quot;tags&quot; not to override any standard Sitecore functionality) &nbsp; Computed Field Class &lt;br /&gt; namespace MikeRobbins.CMS.ComputedFields&lt;br /&gt; {&lt;br /&gt; public class Tags : IComputedIndexField&lt;br /&gt; {&lt;br /&gt; public object ComputeFieldValue(Sitecore.ContentSearch.IIndexable indexable)&lt;br /&gt; {&lt;br /&gt; var tags = new StringBuilder();&lt;/p&gt; &lt;p&gt;Item obj = (Item)(indexable as SitecoreIndexableItem);&lt;/p&gt; &lt;p&gt;if (obj != null)&lt;br /&gt; {&lt;br /&gt; var tagField = (Sitecore.Data.Fields.MultilistField)obj.Fields[&amp;quot;__Semantics&amp;quot;];&lt;/p&gt; &lt;p&gt;if (tagField != null)&lt;br /&gt; {&lt;br /&gt; var items = tagField.GetItems();&lt;/p&gt; &lt;p&gt;foreach (var item in items)&lt;br /&gt; {&lt;br /&gt; tags.Append(item.Name + &amp;quot; &amp;quot;);&lt;br /&gt; }&lt;br /&gt; }&lt;br /&gt; }&lt;/p&gt; &lt;p&gt;return tags.Length != 0? tags.ToString():null;&lt;br /&gt; }&lt;/p&gt; &lt;p&gt;public string FieldName { get; set; }&lt;br /&gt; public string ReturnType { get; set; }&lt;br /&gt; }&lt;br /&gt; }&lt;br /&gt; XML Config Add this XML to the &quot;AddComputedIndexField&quot; section of your search index config. &lt;br /&gt; &lt;field fieldName=&amp;quot;tags&amp;quot;                           &gt;MikeRobbins.CMS.ComputedFields.Tags,MikeRobbins.CMS&lt;/field&gt;&lt;br /&gt;","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/content%20search/sitecore/2014/07/16/text-based-content-search-based-on-tagging.html"},"url":"http://localhost:4000/content%20search/sitecore/2014/07/16/text-based-content-search-based-on-tagging.html"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <header>
      <div class="inner">
        <a href="http://localhost:4000/">
          <h1>Mike Robbins</h1>
        </a>
        <h2>Sitecore Developer Blog
</h2>
        
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>Text Based Content Search Based On Tagging</h1>
          <p>Out of the box Sitecore offers Content Editors the power to create tags, and assign them to content items using the Tagging field in standard values.<!--more--></p>
<p>[caption id="attachment_203" align="aligncenter" ]<a href="https://mikerobbinssitecore.files.wordpress.com/2014/07/tagging.png"><img class="size-medium wp-image-203" src="/assets/tagging.png" alt="Tagging Standard Value"  height="110" /></a> Tagging Standard Value</p>
<p>When analysing the indexes using LUKE, you can see that Sitecore indexes the ID's of each tag. This makes it difficult to perform a text based content search that also matches on tags.</p>
<p>[caption id="attachment_201" align="aligncenter" ]<a href="https://mikerobbinssitecore.files.wordpress.com/2014/07/luke.png"><img class="size-medium wp-image-201" src="/assets/luke.png" alt="Luke Index View"  height="136" /></a> Luke Index View</p>
<p>However Sitecore gives us the power to create computed fields in search indexes. This means we can create new fields within the index and programmatically create text into the index.</p>
<p>This example below uses a computed field that instead of indexing the ID of the tag, instead adds the item name of each tag seperated by a space. This then allows you to perform a text based search against the tag. (Sitecore by default indexes the __Semantics field, so here i'm creating a new field in the index called "tags" not to override any standard Sitecore functionality)</p>
<p>&nbsp;</p>
<h2>Computed Field Class</h2>
<p><figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="k">namespace</span><span class="err"> </span><span class="nn">MikeRobbins.CMS.ComputedFields</span><span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">{&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Tags</span> <span class="p">:</span> <span class="n">IComputedIndexField</span><span class="p">&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">{&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="k">public</span> <span class="kt">object</span> <span class="nf">ComputeFieldValue</span><span class="p">(</span><span class="n">Sitecore</span><span class="p">.</span><span class="n">ContentSearch</span><span class="p">.</span><span class="n">IIndexable</span> <span class="n">indexable</span><span class="p">)&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">{&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="kt">var</span> <span class="n">tags</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();&lt;/</span><span class="n">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="n">Item</span> <span class="n">obj</span> <span class="p">=</span> <span class="p">(</span><span class="n">Item</span><span class="p">)(</span><span class="n">indexable</span> <span class="k">as</span> <span class="n">SitecoreIndexableItem</span><span class="p">);&lt;/</span><span class="n">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">if</span> <span class="p">(</span><span class="n">obj</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">{&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="kt">var</span> <span class="n">tagField</span> <span class="p">=</span> <span class="p">(</span><span class="n">Sitecore</span><span class="p">.</span><span class="n">Data</span><span class="p">.</span><span class="n">Fields</span><span class="p">.</span><span class="n">MultilistField</span><span class="p">)</span><span class="n">obj</span><span class="p">.</span><span class="n">Fields</span><span class="p">[&amp;</span><span class="n">quot</span><span class="p">;</span><span class="n">__Semantics</span><span class="p">&amp;</span><span class="n">quot</span><span class="p">;];&lt;/</span><span class="n">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">if</span> <span class="p">(</span><span class="n">tagField</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">{&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="kt">var</span> <span class="n">items</span> <span class="p">=</span> <span class="n">tagField</span><span class="p">.</span><span class="nf">GetItems</span><span class="p">();&lt;/</span><span class="n">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">item</span> <span class="k">in</span> <span class="n">items</span><span class="p">)&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">{&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="n">tags</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">Name</span> <span class="p">+</span> <span class="p">&amp;</span><span class="n">quot</span><span class="p">;</span> <span class="p">&amp;</span><span class="n">quot</span><span class="p">;);&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">}&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">}&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">}&lt;/</span><span class="n">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">return</span> <span class="n">tags</span><span class="p">.</span><span class="n">Length</span> <span class="p">!=</span> <span class="m">0</span><span class="p">?</span> <span class="n">tags</span><span class="p">.</span><span class="nf">ToString</span><span class="p">():</span><span class="k">null</span><span class="p">;&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">}&lt;/</span><span class="n">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">public</span> <span class="kt">string</span> <span class="n">FieldName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="k">public</span> <span class="kt">string</span> <span class="n">ReturnType</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">}&lt;</span><span class="n">br</span> <span class="p">/&gt;</span>
<span class="p">}&lt;</span><span class="n">br</span> <span class="p">/&gt;</span></code></pre></figure></p>
<h2>XML Config</h2>
<p>Add this XML to the "AddComputedIndexField" section of your search index config.</p>
<p><figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;field</span> <span class="na">fieldName=</span><span class="s">&amp;quot;tags&amp;quot;</span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="err"> </span> <span class="nt">&gt;</span>MikeRobbins.CMS.ComputedFields.Tags,MikeRobbins.CMS<span class="nt">&lt;/field&gt;&lt;br</span> <span class="nt">/&gt;</span></code></pre></figure></p>

        </section>

        <aside id="sidebar">
          <h3>About Me</h3>
          <p>Senior Product Developer at Sitecore</p>
          <p>Sitecore MVP 2015 / 2016</p>
       
        <h3>Tags</h3>
        <p>
            
              Computed Field,</li>
            
              content editor,</li>
            
              developer,</li>
            
              Tagging,</li>
            
        </p>
    
        <h3>Other Reading</h3>
         
        <h2 id=""></h2>
        <ul class="post-list">
            
          
          
          
        </ul>
       
        <h2 id=""></h2>
        <ul class="post-list">
            
          
          
          
        </ul>
      

      <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</p>
      
           </aside>

      </div>
    </div>

    
  </body>
</html>